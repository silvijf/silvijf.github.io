<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fainer</title>
  <link rel="icon" type="image/x-icon"
    href="https://raw.githubusercontent.com/silvijf/silvijf.github.io/refs/heads/main/Content/Icons/logo.ico">

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=close" />
  <style>
    body {
      font-family: sans-serif;
    }

    #container {
      display: grid;
      width: 50%;
      column-gap: 10px;
      margin-bottom: 10px;
    }

    #input {
      grid-row: 2;
      grid-column: 1;
    }

    #order {
      grid-row: 2;
      grid-column: 2;
    }

    #output {
      width: 49.6%;
      max-width: 80%;
      height: 50px;
      max-height: 300px;
    }

    #list {
      display: flex;
      flex-wrap: wrap;
      width: 50%;
      gap: 10px;
    }

    #list>div, #sort {
      background-color: #e3d9d5;
      border: 2px solid black;
      border-radius: 100px;
      padding: 10px;
      padding-top: 5.5px;
      padding-bottom: 4.5px;
      display: flex;
      cursor: pointer;
      transition: 300ms;
    }

    #sort {
      width: 48.35%;
    }

    #list>div:hover, #sort:hover {
      background-color: #ef5858;
    }

    .material-symbols-outlined {
      width: 23px;
      height: 23px;
      font-size: 25px;
      margin-top: -2px;
    }
  </style>
</head>

<body>
  <div id="container">
    <p id="namehelp">Naam van menu-item:</p>
    <input type="text" id="input" placeholder="Vandaag">
    <p id="orderhelp">Op welke plek moet die komen?</p>
    <input type="number" id="order" placeholder="(Volgende: 1)">
  </div>
  <textarea id="output" readonly></textarea>
  <div id="sort">Sorteren</div>
  <div id="list"></div>
  <script>
    const input = document.getElementById("input")
    const order = document.getElementById("order")
    const outputarea = document.getElementById("output")
    const list = document.getElementById("list")
    const sort = document.getElementById("sort")

    var output = []
    defaultValue = ".main-menu{display: grid}"
    outputarea.value = defaultValue

    var previous = 0

    function updateOutput() {
      let outputValue = ""
      for (i = 0; i < output.length; i++) {
        outputValue += `li:has(> #menu-${output[i][0]}){grid-row: ${output[i][1]}}`
      }
      outputarea.value = defaultValue + outputValue
    }

    function submit() {
      if (input.value != "") {
        lowerCase = input.value.toLowerCase()
        if (order.value == "") order.value = previous + 1
        if (lowerCase == "start") lowerCase = "vandaag"
        for (i = 0; i < output.length; i++) {
          if (output[i][0] == lowerCase) {
            output.splice(i, 1)
            list.children[i].remove()
          }
        }
        output.push([lowerCase, order.value])

        let newEl = document.createElement("div")
        newEl.innerText = `${input.value}: ${order.value}`
        newEl.menuText = lowerCase
        newEl.order = order.value
        closebutton = document.createElement("div")
        closebutton.classList.add("material-symbols-outlined")
        closebutton.innerText = "close"
        newEl.appendChild(closebutton)
        newEl.addEventListener("click", (event) => {
          for (i = 0; i < output.length; i++) {
            if (output[i][0] == event.currentTarget.menuText) {
              output.splice(i, 1)
              event.currentTarget.remove()
            }
          }
          updateOutput()
        })
        list.appendChild(newEl)
        updateOutput()
        previous = Number(order.value)
        input.value = ""
        order.value = ""
        order.placeholder = `(Volgende: ${previous + 1})`
        input.focus()
      }
    }

    input.addEventListener("keydown", (event) => {
      if (event.key == "Enter") submit()
    })
    order.addEventListener("keydown", (event) => {
      if (event.key == "Enter") submit()
    })

    sort.addEventListener("click", () => {
      let children = Array.from(list.children)
      children.sort((x, y) => x.order - y.order)
      list.append(...children)
    })
  </script>
</body>